(this.webpackJsonpreact_final_exam=this.webpackJsonpreact_final_exam||[]).push([[0],{107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},122:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),l=(a(82),a(5)),i=a(13),s=a(14),u=(a(83),a(3)),m=a.n(u),p=a(9),f=(a(54),a(8)),d=a.n(f),h=a(157),v=a(160),b=a(159),E=a(154),g=a(158),w=Object(h.a)((function(e){return{submit:{marginTop:3*e.spacing,justifySelf:"center",color:"white"}}})),k=function(e){var t=w(),a=Object(n.useState)(),o=Object(l.a)(a,2),c=o[0],i=o[1],s=Object(n.useState)(),u=Object(l.a)(s,2),f=u[0],h=u[1],k=Object(n.useState)(),j=Object(l.a)(k,2),O=j[0],y=j[1],x=Object(n.useState)(),N=Object(l.a)(x,2),C=N[0],S=N[1],I=Object(n.useState)(),R=Object(l.a)(I,2),W=R[0],F=R[1],_=function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.onError(null),a.preventDefault(),C===W){t.next=6;break}return console.log("errors"),e.onError("Passwords don't match"),t.abrupt("return");case 6:if(!(C<8)){t.next=10;break}return console.log("error"),e.onError("Password too short"),t.abrupt("return");case 10:return t.prev=10,console.log(f),t.next=14,d.a.post("https://read-it-react.herokuapp.com/user/register",{firstName:f,lastName:O,email:c,password:C,repeatPassword:W});case 14:n=t.sent,console.log(n),e.onNotification("Signup succsessful"),e.history.push("/read_it/login"),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(10),t.t0&&(console.log(t.t0.response.data.error),e.onError(t.t0.response.data.error));case 23:console.log("submit");case 24:case"end":return t.stop()}}),t,null,[[10,20]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement("h1",null,"Sign up"),r.a.createElement(v.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(b.a,{htmlFor:"email"},"Email"),r.a.createElement(E.a,{name:"email",type:"email",id:"email",autoComplete:"email",onChange:function(e){return i(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(b.a,{htmlFor:"firstName"},"Firstname"),r.a.createElement(E.a,{name:"firstName",type:"text",id:"firstName",autoComplete:"firstName",onChange:function(e){return h(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(b.a,{htmlFor:"lastname"},"Lastname"),r.a.createElement(E.a,{name:"lastname",type:"text",id:"lastname",autoComplete:"lastname",onChange:function(e){return y(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(b.a,{htmlFor:"password"},"Password"),r.a.createElement(E.a,{name:"password",type:"password",id:"password",autoComplete:"password",onChange:function(e){return S(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(b.a,{htmlFor:"repeatPassword"},"Repeat Password"),r.a.createElement(E.a,{name:"repeatPassword",type:"password",id:"repeatPassword",autoComplete:"repeatPassword",onChange:function(e){return F(e.target.value)}})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:t.submit,onClick:function(e){return _(e)}},"Sign Up")))},j=Object(h.a)((function(e){return{submit:{marginTop:3*e.spacing,justifySelf:"center",color:"white"}}})),O=function(e){var t=j(),a=Object(n.useState)(""),o=Object(l.a)(a,2),c=o[0],s=o[1],u=Object(n.useState)(""),f=Object(l.a)(u,2),h=f[0],w=f[1],k=function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.onError(),a.preventDefault(),c&&h){t.next=5;break}return e.onError("Missing fields"),t.abrupt("return");case 5:return t.prev=5,t.next=8,d.a.post("https://read-it-react.herokuapp.com/user/login",{email:c,password:h});case 8:n=t.sent,console.log(n.data),e.onLogin(!0),e.onNotification("Login successful"),e.history.push("/read_it/profile"),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),t.t0&&(console.log(t.t0.response.data.error),e.onError(t.t0.response.data.error));case 18:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"loginPage"},r.a.createElement("form",{method:"post"},r.a.createElement("h1",null,"Log in"),r.a.createElement(v.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(b.a,{htmlFor:"email"},"Email Address"),r.a.createElement(E.a,{id:"email",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){return s(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(b.a,{htmlFor:"password"},"Password"),r.a.createElement(E.a,{name:"password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return w(e.target.value)}})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:t.submit,onClick:function(e){return k(e)}},"Log in")),r.a.createElement(i.b,{to:"/read_it/forgotpassword"},"Forgot Your Password?"))},y=function(e){return function(t){var a=Object(n.useState)(!1),o=Object(l.a)(a,2),c=o[0],i=o[1],s=Object(n.useState)(),u=Object(l.a)(s,2),f=u[0],h=u[1];return Object(n.useEffect)((function(){var e=!0;return function(){var t=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.get("https://read-it-react.herokuapp.com/auth");case 3:a=t.sent,e&&(i(!0),h(a.data.response)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0&&console.log(t.t0.response.data.error);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()(),function(){return e=!1}}),[]),r.a.createElement(e,Object.assign({isAuthorized:c,userID:f},t))}},x=Object(h.a)((function(e){return{submit:{justifySelf:"center",color:"white"}}})),N=y((function(e){var t=x(),a=Object(s.f)(),n=function(){var t=Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d()("https://read-it-react.herokuapp.com/user/logout");case 3:n=t.sent,console.log(e),n.data.response&&(e.onLogout(!1),e.onNotification("You are now logged out"),console.log(a.location),"/profile"===a.location&&e.history.push("/")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),t.t0&&console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:t.submit,onClick:n},"Log Out")})),C=a(155),S=a(72),I=a(69),R=a.n(I),W=Object(S.a)({palette:{primary:{main:"#333745"},secondary:R.a}}),F=a(26),_=a(156),L=Object(h.a)((function(e){return{submit:{marginTop:3*e.spacing,justifySelf:"center",color:"white"},delete:{backgroundColor:"rgb(61, 60, 60)",color:"white"}}})),B=y((function(e){var t=L(),a=Object(n.useState)(e.rating),o=Object(l.a)(a,2),c=o[0],s=o[1],u=Object(n.useState)(e.title),f=Object(l.a)(u,2),h=f[0],w=f[1],k=Object(n.useState)(e.review),j=Object(l.a)(k,2),O=j[0],y=j[1],x=Object(n.useState)(!1),N=Object(l.a)(x,2),C=N[0],S=N[1],I=Object(n.useState)(!1),R=Object(l.a)(I,2),W=R[0],B=R[1],P=function(){var t=Object(p.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.onDelete(e.id),B(!1),S(!1);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=function(){var t=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(c||O||h)){t.next=12;break}return t.prev=1,t.next=4,d.a.post("https://read-it-react.herokuapp.com/updateReview",{reviewID:e.id,newReviewTitle:h,newReviewText:O,newReviewRating:c});case 4:a=t.sent,console.log(a.data),S(!1),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),t.t0&&console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();console.log(e);return r.a.createElement(r.a.Fragment,null,C?(console.log(e),r.a.createElement("div",{className:"model"},r.a.createElement("div",{className:"model-content"},r.a.createElement("span",{className:"btn",onClick:function(){return S(!1)}},"X"),r.a.createElement("h3",null,"Edit Your Review"),r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"title"},"Title of Review"),r.a.createElement(E.a,{name:"title",type:"text",defaultValue:e.title,id:"title",onChange:function(e){return w(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"rating"},"Rating"),r.a.createElement(E.a,{name:"rating",type:"number",defaultValue:e.rating,id:"rating",onChange:function(e){return s(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(_.a,{id:"standard-textarea",defaultValue:e.review,label:"Review",multiline:!0,onChange:function(e){return y(e.target.value)}})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:t.submit,onClick:function(e){return D(e)}},"Submit Changes"),r.a.createElement("div",{className:"dltBtn btn",onClick:function(){return B(!0)}},r.a.createElement(F.b,null),"Delete Review")))):null,r.a.createElement("div",{className:"review",key:e.id},r.a.createElement("div",{className:"link-editBtn"},r.a.createElement(i.b,{to:"bookdetail/"+e.book_id},"About ",e.book_title),function(){if(e.userID===e.user_id)return r.a.createElement("div",{className:"btn",onClick:function(t){return S(e.id)}},r.a.createElement(F.e,null),"Edit Review")}()),r.a.createElement("div",{className:"pub-authors"},r.a.createElement("div",null,r.a.createElement("h5",null,e.book_title),r.a.createElement("p",null,"Review by ",e.user.first_name," ",e.user.last_name)),r.a.createElement("div",{className:"rating"}," ",function(){for(var t=[],a=0;a<parseInt(e.rating);a++)t.push(r.a.createElement(F.a,{key:a}));return t}())),r.a.createElement("img",{src:e.img,alt:"book cover"}),r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.review),W?(console.log("delete"),r.a.createElement("div",{className:"model"},r.a.createElement("div",{className:"model-content"},r.a.createElement("h2",null,"Are you sure you want to delete this review?"),r.a.createElement("p",null,"This action cannot be reversed"),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",className:t.delete,onClick:P},"Delete"),r.a.createElement(g.a,{type:"submit",fullWidth:!0,color:"secondary",variant:"contained",className:t.submit,onClick:function(){return B(!1)}},"Cancel")))):null))})),P=(a(107),Object(h.a)((function(e){return{submit:{marginTop:3*e.spacing,justifySelf:"center",color:"white"},delete:{backgroundColor:"rgb(61, 60, 60)",color:"white"}}}))),D=y((function(e){var t=P(),a=Object(n.useState)(),o=Object(l.a)(a,2),c=o[0],u=o[1],f=Object(n.useState)(),h=Object(l.a)(f,2),w=h[0],k=h[1],j=Object(n.useState)(!1),O=Object(l.a)(j,2),y=O[0],x=O[1],N=Object(n.useState)(),C=Object(l.a)(N,2),S=C[0],I=C[1],R=Object(n.useState)(),W=Object(l.a)(R,2),_=W[0],L=W[1],D=Object(n.useState)(),T=Object(l.a)(D,2),A=T[0],q=T[1],z=Object(n.useState)(!1),Y=Object(l.a)(z,2),M=Y[0],U=Y[1],V=Object(s.f)();Object(n.useEffect)((function(){var t=!0,a=function(){var a=Object(p.a)(m.a.mark((function a(){var n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,d()("https://read-it-react.herokuapp.com/getBooksInLibrary");case 3:n=a.sent,console.log(n.data),t&&u(n.data),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),a.t0&&e.onError(a.t0.response.data.error);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(){return a.apply(this,arguments)}}(),n=function(){var a=Object(p.a)(m.a.mark((function a(){var n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,d()("https://read-it-react.herokuapp.com/getUserReviewedBooks");case 3:n=a.sent,console.log(n.data),t&&k(n.data),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),a.t0&&e.onError(a.t0.response.data.error);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(){return a.apply(this,arguments)}}();return e.isAuthorized&&(a(),n()),function(){return t=!1}}),[e.isAuthorized]);var H=function(){var t=Object(p.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),console.log("submit profile changes"),!(A||S||_)){t.next=17;break}return t.prev=3,t.next=6,d.a.post("https://read-it-react.herokuapp.com/user/update",{newFirstname:S,newLastname:_,newEmail:A});case 6:n=t.sent,console.log(n.data),e.onNotification(n.data.response),x(!1),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),t.t0&&e.onError(t.t0.response.data.error);case 15:t.next=18;break;case 17:e.onError("Please fill out information you would like changed");case 18:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}(),J=function(){var t=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.delete("https://read-it-react.herokuapp.com/user/deleteAccount");case 3:a=t.sent,console.log(a.data),e.onNotification(a.data.response),V.push("/read_it/"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),t.t0&&e.onError(t.t0.response.data.error);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),Q=function(){var t=Object(p.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("remove from library",a),t.prev=1,t.next=4,d.a.post("https://read-it-react.herokuapp.com/removeBookFromLibrary",{likedBookID:a});case 4:n=t.sent,console.log(n.data),console.log(c),r=c.filter((function(e){return e.book_id!==a})),u(r),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),t.t0&&e.onError(t.t0.response.data.error);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),X=function(){var t=Object(p.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.post("https://read-it-react.herokuapp.com/deleteReview",{id:a});case 3:n=t.sent,console.log(n.data),e.onNotification(n.data.response),r=w.filter((function(e){return e.id!==a})),k(r),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),t.t0&&e.onError(t.t0.response.data.error);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}();return e.isAuthorized?r.a.createElement("div",{className:"profile"},r.a.createElement("div",null,r.a.createElement("h2",null,"Your Library"),r.a.createElement("div",{className:"library"},c?c.map((function(e){return r.a.createElement("div",{className:"book",key:e.id},r.a.createElement(F.d,{className:"heartIcon",onClick:function(){return Q(e.book_id)}}),r.a.createElement("img",{src:e.img,alt:"Book cover"}),r.a.createElement("h3",null,e.title),r.a.createElement("h4",null,e.author),r.a.createElement(i.b,{to:"/read_it/reviewbook/"+e.book_id},"Review Book"))})):r.a.createElement("div",null,r.a.createElement("h2",null,"There appears to be nothing in your library"),r.a.createElement(i.b,{to:"/"},"Browse Books")))),r.a.createElement("div",{className:"userReviews"},r.a.createElement("h2",null,"Your Reviews"),w?w.map((function(e){return r.a.createElement(B,Object.assign({},e,{onDelete:X}))})):null),r.a.createElement("button",{className:y?"shown editBtn":"editBtn",onClick:function(){return x(!y)}},"Edit your information"),r.a.createElement("form",{className:y?"showForm editForm":"editForm"},r.a.createElement("h3",null,"Update your information"),r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"newFirstname"},"Firstname"),r.a.createElement(E.a,{name:"newFirstname",type:"text",id:"newFirstname",onChange:function(e){return I(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"newLastname"},"Lastname"),r.a.createElement(E.a,{name:"newLastname",type:"text",id:"newLastname",onChange:function(e){return L(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"newEmail"},"Email"),r.a.createElement(E.a,{name:"newEmail",type:"text",id:"newEmail",onChange:function(e){return q(e.target.value)}})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:t.submit,onClick:function(e){return H(e)}},"Submit Changes")),r.a.createElement("div",{className:"dltBtn btn",onClick:function(){return U(!0)}},r.a.createElement(F.b,null),"Delete Account"),M?(console.log("delete"),r.a.createElement("div",{className:"model"},r.a.createElement("div",{className:"model-content"},r.a.createElement("h2",null,"Are you sure you want to delete your account?"),r.a.createElement("p",null,"This action cannot be reversed"),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",className:t.delete,onClick:J},"Delete"),r.a.createElement(g.a,{type:"submit",fullWidth:!0,color:"secondary",variant:"contained",className:t.submit,onClick:function(){return U(!1)}},"Cancel")))):null):r.a.createElement("div",{className:"notAuthorized"},r.a.createElement("h1",null,"Log in to view your profile"),r.a.createElement(i.b,{to:"/read_it/login"}," Login"))})),T=(a(63),y((function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),o=a[0],c=a[1];console.log(e);var s,u,f,h,v=null;e.volumeInfo.hasOwnProperty("publishedYear")&&(s=e.volumeInfo.publishedDate.slice(0,4)),e.volumeInfo.hasOwnProperty("description")&&(f=e.volumeInfo.description,h=150,u=f&&f.length>h?f.slice(0,h).split(" ").slice(0,-1).join(" "):f),e.volumeInfo.hasOwnProperty("authors")&&(v=e.volumeInfo.authors.map((function(e){return e})));var b=function(){var t=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isAuthorized){t.next=16;break}return v=e.volumeInfo.hasOwnProperty("authors")?v.toString():null,console.log(v),t.prev=3,t.next=6,d.a.post("https://read-it-react.herokuapp.com/addBookToLibrary",{bookID:e.id,title:e.volumeInfo.title,author:v,img:e.volumeInfo.imageLinks.thumbnail});case 6:a=t.sent,console.log(a.data),c(!0),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),t.t0&&console.log(t.t0.response.data.error);case 14:t.next=17;break;case 16:e.error("Please login to add a book to your library");case 17:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("remove from library"),t.prev=1,t.next=4,d.a.post("https://read-it-react.herokuapp.com/removeBookFromLibrary",{likedBookID:e.id});case 4:a=t.sent,console.log(a.data),c(!1),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(e.likedBooks){var t=e.likedBooks.find((function(t){return t.book_id===e.id}));c(!!t)}}),[e]),console.log(e.likedBooks),r.a.createElement("div",{className:"searchResult"},e.volumeInfo.imageLinks?r.a.createElement("img",{src:e.volumeInfo.imageLinks.smallThumbnail,alt:"book cover"}):null,o?r.a.createElement(F.d,{className:"heartIcon",onClick:E}):r.a.createElement(F.c,{className:"heartIcon",onClick:b}),r.a.createElement("h3",null,e.volumeInfo.title),r.a.createElement("div",{className:"authors"},v?v.map((function(e,t){return r.a.createElement("h4",{key:e+t}," By: ",e)})):null),r.a.createElement("p",null,u," ",r.a.createElement(i.b,{to:"/bookdetail/"+e.id},"...Read More")),r.a.createElement("div",null,r.a.createElement("p",null,e.volumeInfo.publisher),r.a.createElement("p",null,s)))}))),A=a(70),q=a.n(A),z=Object(h.a)((function(e){return{submit:{marginTop:3*e.spacing,justifySelf:"center",color:"white"}}})),Y=y((function(e){var t=z(),a=Object(n.useState)(),o=Object(l.a)(a,2),c=o[0],i=o[1],s=Object(n.useState)(),u=Object(l.a)(s,2),f=u[0],h=u[1],w=Object(n.useState)(""),k=Object(l.a)(w,2),j=k[0],O=k[1],y=function(){return!c},x=function(){var t=Object(p.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,d()("https://www.googleapis.com/books/v1/volumes?q=".concat(c,"&keys:").concat(q.a.key),{withCredentials:!1});case 4:n=t.sent,console.log(n.data),(r=n.data.items).map((function(e){var t=e.volumeInfo;return console.log(t),t})),h(r),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),t.t0&&e.onError(t.t0.response.data.error);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),N=function(t){e.onError(t)},C=function(t){e.onNotification(t)};return Object(n.useEffect)((function(){var t=function(){var t=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d()("https://read-it-react.herokuapp.com/getBooksInLibrary");case 3:a=t.sent,O(a.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0&&e.onError(t.t0.response.data.error);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();e.isAuthorized&&t()}),[e.isAuthorized]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Search for Books"),r.a.createElement("form",{className:"searchForm"},r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"search"},"Search by Book Title"),r.a.createElement(E.a,{name:"search",type:"text",id:"search",autoComplete:"search",onChange:function(e){return i(e.target.value)}})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:t.submit,onClick:function(e){return x(e)}},"Search")),r.a.createElement("div",{className:"searchResultContainer"},f?f.map((function(e){return r.a.createElement(T,Object.assign({},e,{key:e.volumeInfo.title+e.volumeInfo.id,disabled:y,error:N,notification:C,likedBooks:j}))})):null))})),M=(a(108),Object(h.a)((function(e){return{submit:{marginTop:3*e.spacing,justifySelf:"center",color:"white",maxHeight:"40px"}}}))),U=y((function(e){var t=M(),a=Object(n.useState)(),o=Object(l.a)(a,2),c=o[0],u=o[1],f=Object(n.useState)(),h=Object(l.a)(f,2),w=h[0],k=h[1],j=Object(n.useState)(),O=Object(l.a)(j,2),y=O[0],x=O[1],N=Object(n.useState)(),C=Object(l.a)(N,2),S=C[0],I=C[1],R=Object(s.g)().id;Object(n.useEffect)((function(){var e=!0;return function(){var t=Object(p.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d()("https://www.googleapis.com/books/v1/volumes/".concat(R),{withCredentials:!1});case 2:a=t.sent,console.log(a.data),e&&u(a.data);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){return e=!1}}),[R]);var W=function(){var t=Object(p.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),console.log("submit review"),t.prev=2,t.next=5,d.a.post("https://read-it-react.herokuapp.com/addReview",{reviewText:w,reviewRating:S,bookID:R,reviewTitle:y,bookTitle:c.volumeInfo.title,img:c.volumeInfo.imageLinks.smallThumbnail});case 5:e.onNotification("Review successfully posted"),e.history.push("/read_it/reviews"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),t.t0&&e.onError(t.t0.response.data.error);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}();return R?e.isAuthorized?c?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{to:"/read_it/profile"},"Back to Profile"),r.a.createElement("div",{className:"reviewForm"},r.a.createElement("h1",null,"Create Review of ",c.volumeInfo.title),r.a.createElement("img",{src:c.volumeInfo.imageLinks.smallThumbnail,alt:c.volumeInfo.title+"cover image"}),r.a.createElement("form",null,r.a.createElement(v.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(b.a,{htmlFor:"title"},"Title of Review"),r.a.createElement(E.a,{name:"title",type:"text",id:"title",onChange:function(e){return x(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(b.a,{htmlFor:"rating"},"Rating"),r.a.createElement(E.a,{name:"rating",type:"number",id:"rating",onChange:function(e){return I(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(_.a,{required:!0,id:"standard-textarea",label:"Review",multiline:!0,onChange:function(e){return k(e.target.value)}})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:t.submit,onClick:function(e){return W(e)}},"Submit Review")))):r.a.createElement("h1",null,"Review"):r.a.createElement("div",{className:"notAuthorized"},r.a.createElement("h1",null,"Please login to review this book"),r.a.createElement(i.b,{to:"login"},"Login")):e.history.push("/read_it/profile")})),V=(a(109),Object(h.a)((function(e){return{submit:{marginTop:3*e.spacing,justifySelf:"center",color:"white"}}})));function H(e){var t=V(),a=Object(n.useState)(),o=Object(l.a)(a,2),c=o[0],i=o[1],s=Object(n.useState)(),u=Object(l.a)(s,2),f=u[0],h=u[1],w=Object(n.useState)(!1),k=Object(l.a)(w,2),j=k[0],O=k[1];Object(n.useEffect)((function(){var t=!0;return function(){var a=Object(p.a)(m.a.mark((function a(){var n;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,d()("https://read-it-react.herokuapp.com/getReviews");case 3:n=a.sent,console.log(n.data),t&&i(n.data),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),a.t0&&e.onError(a.t0.response.data.error);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(){return a.apply(this,arguments)}}()(),function(){return t=!1}}),[e,j]);var y=function(){var t=Object(p.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.post("https://read-it-react.herokuapp.com/deleteReview",{id:a});case 3:n=t.sent,console.log(n.data),e.onNotification(n.data.response),r=c.filter((function(e){return e.id!==a})),i(r),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),t.t0&&e.onError(t.t0.response.data.error);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"reviewsWrapper"},r.a.createElement("h1",null,"Reviews"),f?r.a.createElement("div",{className:"clearBtn btn",onClick:function(){return O(!0)}},"Clear Search"):null,r.a.createElement("form",{className:"searchForm"},r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"searchStr"},"Search for Reviews"),r.a.createElement(E.a,{name:"searchStr",type:"text",id:"searchStr",onChange:function(e){return h(e.target.value)}})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:t.submit,onClick:function(t){return function(t){if(t.preventDefault(),f){var a=c.filter((function(e){if(console.log(e),e.book_title.toLowerCase().includes(f.toLowerCase())||e.user.first_name.toLowerCase().includes(f.toLowerCase())||e.user.last_name.toLowerCase().includes(f.toLowerCase()))return e}));if(console.log(a.length),0===a.length)return console.log(a),void e.onError("No reviews match your search");i(a)}}(t)}},"Search")),c?c.map((function(e){return r.a.createElement(B,Object.assign({},e,{key:e.id,onDelete:y}))})):null)}var J=Object(h.a)((function(e){return{submit:{marginTop:3*e.spacing,justifySelf:"center",color:"white"}}})),Q=function(e){var t=J(),a=Object(n.useState)(),o=Object(l.a)(a,2),c=o[0],i=o[1],s=function(){var t=Object(p.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,d.a.post("https://read-it-react.herokuapp.com/sendResetLink",{email:c});case 4:t.sent.data.response&&(e.onNotification("email sent"),e.history.push("/")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),t.t0&&(console.log(t.t0),e.onError(t.t0.response.data.error));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("form",null,r.a.createElement(v.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(b.a,{htmlFor:"email"},"Email Address"),r.a.createElement(E.a,{id:"email",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){return i(e.target.value)}})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:t.submit,onClick:function(e){return s(e)}},"Send Email"))},X=Object(h.a)((function(e){return{submit:{marginTop:3*e.spacing,justifySelf:"center",color:"white"}}})),Z=function(e){var t=X(),a=Object(n.useState)(),o=Object(l.a)(a,2),c=o[0],i=o[1],s=Object(n.useState)(),u=Object(l.a)(s,2),f=u[0],h=u[1],w=function(){var t=Object(p.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("click"),a.preventDefault(),c&&f){t.next=5;break}return e.onError("Missing fields"),t.abrupt("return");case 5:if(c===f){t.next=8;break}return e.onError("Passwords dont match"),t.abrupt("return");case 8:return t.prev=8,console.log("try"),t.next=12,d.a.post("https://read-it-react.herokuapp.com/resetpassword",{token:e.match.params.token,newPassword:c,newRepeatPassword:f});case 12:n=t.sent,console.log(n.data),n.data.response&&(r=n.data.response.stoUpperCase(),e.onNotification(r)),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(8),e.onError(t.t0.response.data.error);case 20:case"end":return t.stop()}}),t,null,[[8,17]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement(v.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(b.a,{htmlFor:"newPassword"},"New Password"),r.a.createElement(E.a,{name:"newPassword",type:"password",id:"newPassword",onChange:function(e){return i(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(b.a,{htmlFor:"newRepeatPassword"},"Repeat New Password"),r.a.createElement(E.a,{name:"newRepeatPassword",type:"password",id:"newRepeatPassword",onChange:function(e){return h(e.target.value)}})),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:t.submit,onClick:function(e){return w(e)}},"Set new Password")))},$=(a(110),a(71)),G=a.n($),K=function(e){var t=Object(s.g)().id,a=Object(s.f)(),o=Object(n.useState)(),c=Object(l.a)(o,2),i=c[0],u=c[1],f=Object(n.useState)(),h=Object(l.a)(f,2),v=h[0],b=h[1];return Object(n.useEffect)((function(){var a=!0,n=function(){var n=Object(p.a)(m.a.mark((function n(){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d()("https://www.googleapis.com/books/v1/volumes/".concat(t),{withCredentials:!1});case 3:r=n.sent,a&&u(r.data),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),e.onError(n.t0.response.data.error);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}(),r=function(){var n=Object(p.a)(m.a.mark((function n(){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d()("https://read-it-react.herokuapp.com/getSingleBookReviews/".concat(t));case 3:r=n.sent,console.log(r.data),a&&b(r.data),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),e.onError(n.t0.response.data.error);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();return n(),r(),function(){return a=!1}}),[e,t]),i?(console.log(a),console.log(i),r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"link",onClick:function(){return a.goBack()}},"Back"),r.a.createElement("div",{className:"bookDetail"},r.a.createElement("div",null,r.a.createElement("h1",null,i.volumeInfo.title),r.a.createElement("h2",null,i.volumeInfo.subtitle)),r.a.createElement("img",{src:i.volumeInfo.imageLinks.smallThumbnail,alt:"book cover"}),r.a.createElement("div",{className:"pub-authors"},r.a.createElement("div",null,i.volumeInfo.authors?i.volumeInfo.authors.map((function(e,t){return r.a.createElement("h4",{key:e+t}," By: ",e)})):null),r.a.createElement("div",null,r.a.createElement("p",null,"Published: ",new Date(i.volumeInfo.publishedDate).toDateString().slice(4,15)),r.a.createElement("p",null,"Published by: ",r.a.createElement("strong",null,i.volumeInfo.publisher)))),i.volumeInfo.description?r.a.createElement("div",null,G()(i.volumeInfo.description)):null,r.a.createElement("a",{href:i.volumeInfo.infoLink},"More Information")),r.a.createElement("div",{className:"reviews"},r.a.createElement("h2",null,"Reviews"),v?v.map((function(e){return r.a.createElement(B,Object.assign({},e,{key:e.id}))})):null))):r.a.createElement("div",{className:"loader"},"Loading...")},ee=function(e){return r.a.createElement("div",{className:"error"},r.a.createElement("h3",null,e.error))},te=function(e){return r.a.createElement("div",null,r.a.createElement("h3",null,e.notification))};d.a.defaults.withCredentials=!0;var ae=y((function(e){var t=Object(n.useState)(),a=Object(l.a)(t,2),o=a[0],c=a[1],u=Object(n.useState)(),m=Object(l.a)(u,2),p=m[0],f=m[1],d=Object(n.useState)(!1),h=Object(l.a)(d,2),v=h[0],b=h[1];Object(n.useEffect)((function(){e.isAuthorized&&b(!0)}),[e.isAuthorized]);var E=function(e){console.log(e),b(e)},g=function(e){c(e),setTimeout((function(){c()}),2500)},w=function(e){f(e),setTimeout((function(){f()}),2500)};return r.a.createElement("div",{className:"App"},r.a.createElement(C.a,{theme:W},r.a.createElement(i.a,null,r.a.createElement("nav",null,r.a.createElement("li",{className:"logo"},"READ IT"),r.a.createElement(i.c,{activeClassName:"active",exact:!0,to:"/read_it"},"Home"),r.a.createElement(i.c,{activeClassName:"active",to:"/read_it/reviews"},"Reviews"),r.a.createElement(i.c,{activeClassName:"active",to:"/read_it/signup"},"Sign up"),v?null:r.a.createElement(i.c,{activeClassName:"active",to:"/read_it/login"},"Log in"),v?r.a.createElement(i.c,{activeClassName:"active",to:"/read_it/profile"},"Profile"):null,v?r.a.createElement(N,{onLogout:E,onNotification:w,onError:g}):null),r.a.createElement("main",null,r.a.createElement("div",{className:o?"show errorWrapper":"errorWrapper"},r.a.createElement(ee,{error:o})),r.a.createElement("div",{className:p?"show notificationWrapper":"notificationWrapper"},r.a.createElement(te,{notification:p})),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/read_it/",component:function(){return r.a.createElement(Y,{onError:g,onNotification:w})}}),r.a.createElement(s.a,{exact:!0,path:"/read_it/bookdetail/:id",component:function(){return r.a.createElement(K,Object.assign({},e,{onError:g,onNotification:w}))}}),r.a.createElement(s.a,{path:"/read_it/signup",component:function(e){return r.a.createElement(k,Object.assign({},e,{onError:g,onNotification:w}))}}),r.a.createElement(s.a,{path:"/read_it/login",component:function(e){return r.a.createElement(O,Object.assign({},e,{onError:g,onLogin:E,onNotification:w}))}}),r.a.createElement(s.a,{path:"/read_it/profile",component:function(e){return r.a.createElement(D,Object.assign({},e,{onError:g,onNotification:w}))}}),r.a.createElement(s.a,{path:"/read_it/reviews",component:function(e){return r.a.createElement(H,Object.assign({},e,{onError:g,onNotification:w}))}}),r.a.createElement(s.a,{path:"/read_it/reviewbook/:id",component:function(e){return r.a.createElement(U,Object.assign({},e,{onError:g,onNotification:w}))}}),r.a.createElement(s.a,{path:"/read_it/forgotpassword",component:function(e){return r.a.createElement(Q,Object.assign({},e,{onError:g,onNotification:w}))}}),r.a.createElement(s.a,{path:"/read_it/resetpassword/:token",component:function(e){return r.a.createElement(Z,Object.assign({},e,{onError:g,onNotification:w}))}}))))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,a){},63:function(e,t,a){},70:function(e,t){e.exports={key:"AIzaSyB3gDTDat8kpQvBZBW2z8B7ye2a_c0RbzI"}},77:function(e,t,a){e.exports=a(122)},82:function(e,t,a){},83:function(e,t,a){}},[[77,1,2]]]);
//# sourceMappingURL=main.044689e1.chunk.js.map