{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\el\\xEDsabet\\\\Documents\\\\web-dev\\\\react\\\\react_final_exam\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\el\\xEDsabet\\\\Documents\\\\web-dev\\\\react\\\\react_final_exam\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\el\\xEDsabet\\\\Documents\\\\web-dev\\\\react\\\\react_final_exam\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';var isAuthorized=function isAuthorized(ComponentToWrap){return function(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoggedIn=_useState2[0],setLoginStatus=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),userID=_useState4[0],setUserID=_useState4[1];useEffect(function(){var isFetching=true;var fetchOnlineUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://read-it-react.herokuapp.com/auth\");case 3:response=_context.sent;if(isFetching){setLoginStatus(true);setUserID(response.data.response);}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);if(_context.t0){console.log(_context.t0.response.data.error);}case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchOnlineUser(){return _ref.apply(this,arguments);};}();fetchOnlineUser();return function(){return isFetching=false;};//unsubscribe\n},[]);return/*#__PURE__*/React.createElement(ComponentToWrap,Object.assign({isAuthorized:isLoggedIn,userID:userID},props));};};export default isAuthorized;","map":{"version":3,"sources":["C:/Users/elÃ­sabet/Documents/web-dev/react/react_final_exam/client/src/auth/isAuthorized.js"],"names":["React","useState","useEffect","axios","isAuthorized","ComponentToWrap","props","isLoggedIn","setLoginStatus","userID","setUserID","isFetching","fetchOnlineUser","get","response","data","console","log","error"],"mappings":"klBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,eAAe,QAAI,UAAAC,KAAK,CAAI,eACNL,QAAQ,CAAC,KAAD,CADF,wCACrCM,UADqC,eACzBC,cADyB,8BAEfP,QAAQ,EAFO,yCAErCQ,MAFqC,eAE7BC,SAF6B,eAI7CR,SAAS,CAAC,UAAM,CACd,GAAIS,CAAAA,UAAU,CAAG,IAAjB,CAEA,GAAMC,CAAAA,eAAe,0FAAG,sLAEGT,CAAAA,KAAK,CAACU,GAAN,CAAU,0CAAV,CAFH,QAEdC,QAFc,eAGpB,GAAGH,UAAH,CAAc,CACZH,cAAc,CAAC,IAAD,CAAd,CACAE,SAAS,CAACI,QAAQ,CAACC,IAAT,CAAcD,QAAf,CAAT,CACD,CANmB,+EAQpB,eAAO,CACLE,OAAO,CAACC,GAAR,CAAY,YAAIH,QAAJ,CAAaC,IAAb,CAAkBG,KAA9B,EACD,CAVmB,oEAAH,kBAAfN,CAAAA,eAAe,0CAArB,CAcAA,eAAe,GACf,MAAO,kBAAMD,CAAAA,UAAU,CAAG,KAAnB,EAAP,CAAiC;AACtC,CAnBY,CAmBX,EAnBW,CAAT,CAqBF,mBACE,oBAAC,eAAD,gBAAiB,YAAY,CAAEJ,UAA/B,CAA2C,MAAM,CAAEE,MAAnD,EAA+DH,KAA/D,EADF,CAGD,CA5BmC,EAApC,CA+BA,cAAeF,CAAAA,YAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst isAuthorized = ComponentToWrap => props => {\r\n    const [ isLoggedIn, setLoginStatus ] = useState(false);\r\n    const [ userID, setUserID ] = useState()\r\n     \r\n    useEffect(() => {\r\n      let isFetching = true\r\n      \r\n      const fetchOnlineUser = async () => {        \r\n        try{\r\n          const response = await axios.get(\"https://read-it-react.herokuapp.com/auth\")\r\n          if(isFetching){\r\n            setLoginStatus(true)\r\n            setUserID(response.data.response)\r\n          }\r\n        }catch(err){\r\n          if(err){\r\n            console.log(err.response.data.error)\r\n          }\r\n        }\r\n      }\r\n\r\n      fetchOnlineUser()\r\n      return () => isFetching = false; //unsubscribe\r\n},[])\r\n\r\n  return (\r\n    <ComponentToWrap isAuthorized={isLoggedIn} userID={userID} {...props}/>\r\n  );\r\n}\r\n\r\n\r\nexport default isAuthorized"]},"metadata":{},"sourceType":"module"}