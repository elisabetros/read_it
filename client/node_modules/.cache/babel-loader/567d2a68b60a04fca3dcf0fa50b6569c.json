{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\el\\xEDsabet\\\\Documents\\\\web-dev\\\\react\\\\react_final_exam\\\\client\\\\src\\\\components\\\\Review.js\";\nimport React, { useState } from \"react\";\nimport { BsFillStarFill, BsPencilSquare, BsFillTrashFill } from 'react-icons/bs';\nimport { Link } from \"react-router-dom\";\nimport isAuthorized from \"../auth/isAuthorized\";\nimport axios from 'axios';\nimport { makeStyles } from '@material-ui/styles';\nimport { Button, FormControl, Input, InputLabel, TextField } from '@material-ui/core';\nconst useStyles = makeStyles(theme => ({\n  submit: {\n    marginTop: theme.spacing * 3,\n    justifySelf: 'center',\n    color: 'white'\n  },\n  delete: {\n    backgroundColor: 'rgb(61, 60, 60)',\n    color: 'white'\n  }\n}));\n\nconst Review = props => {\n  const classes = useStyles();\n  const [newReviewRating, setNewReviewRating] = useState(props.rating);\n  const [newReviewTitle, setNewReviewTitle] = useState(props.title);\n  const [newReviewText, setNewReviewText] = useState(props.review);\n  const [editModel, setEditModel] = useState(false);\n  const [deleteModel, setDeleteModel] = useState(false);\n\n  const showDeleteModel = () => {\n    console.log('delete');\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"model\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"model-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }\n    }, \"Are you sure you want to delete this review?\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }\n    }, \"This action cannot be reversed\"), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      fullWidth: true,\n      variant: \"contained\",\n      className: classes.delete,\n      onClick: deleteAccount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 18\n      }\n    }, \"Delete\"), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      fullWidth: true,\n      color: \"secondary\",\n      variant: \"contained\",\n      className: classes.submit,\n      onClick: () => setDeleteModel(false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }\n    }, \"Cancel\")));\n  };\n\n  const showEditModel = () => {\n    // const review = reviewedBooks.find(review => review.id === id)\n    console.log(props);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"model\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 16\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"model-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"btn\",\n      onClick: () => setEditModel(false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }\n    }, \"X\"), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }\n    }, \"Edit Your Review\"), /*#__PURE__*/React.createElement(FormControl, {\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      htmlFor: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }, \"Title of Review\"), /*#__PURE__*/React.createElement(Input, {\n      name: \"title\",\n      type: \"text\",\n      defaultValue: props.title,\n      id: \"title\",\n      onChange: e => setNewReviewTitle(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(FormControl, {\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      htmlFor: \"rating\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, \"Rating\"), /*#__PURE__*/React.createElement(Input, {\n      name: \"rating\",\n      type: \"number\",\n      defaultValue: props.rating,\n      id: \"rating\",\n      onChange: e => setNewReviewRating(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(FormControl, {\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      id: \"standard-textarea\",\n      defaultValue: props.review,\n      label: \"Review\",\n      multiline: true,\n      onChange: e => setNewReviewText(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      fullWidth: true,\n      variant: \"contained\",\n      color: \"secondary\",\n      className: classes.submit,\n      onClick: e => handleEditReview(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }\n    }, \"Submit Changes\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dltBtn btn\",\n      onClick: () => setDeleteModel(true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(BsFillTrashFill, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 79\n      }\n    }), \"Delete Account\")));\n  };\n\n  const handleEditReview = async () => {\n    if (newReviewRating || newReviewText || newReviewTitle) {\n      try {\n        const response = await axios.post('http://localhost/updateReview', {\n          reviewID: props.id,\n          newReviewTitle,\n          newReviewText,\n          newReviewRating\n        });\n        console.log(response.data);\n        setEditModel(false);\n      } catch (err) {\n        if (err) {\n          console.log(err);\n        }\n      }\n    }\n  };\n\n  const checkUser = () => {\n    if (props.userID === props.user_id) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"btn\",\n        onClick: e => setEditModel(props.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 22\n        }\n      }, /*#__PURE__*/React.createElement(BsPencilSquare, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 83\n        }\n      }), \"Edit Review\");\n    }\n  };\n\n  console.log(props);\n\n  const showRating = () => {\n    let ratingArray = [];\n\n    for (let i = 0; i < parseInt(props.rating); i++) {\n      ratingArray.push( /*#__PURE__*/React.createElement(BsFillStarFill, {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 30\n        }\n      }));\n    }\n\n    return ratingArray;\n  };\n\n  return (\n    /*#__PURE__*/\n    // {props.review?\n    React.createElement(React.Fragment, null, editModel ? showEditModel(editModel) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"review\",\n      key: props.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"link-editBtn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"bookdetail/\" + props.book_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 14\n      }\n    }, \"About \", props.book_title), checkUser()), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pub-authors\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, props.book_title), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    }, \"Review by \", props.user.first_name, \" \", props.user.last_name)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"rating\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 18\n      }\n    }, \" \", showRating())), /*#__PURE__*/React.createElement(\"img\", {\n      src: props.img,\n      alt: \"book cover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 13\n      }\n    }, props.title), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }\n    }, props.review), deleteModel ? showDeleteModel() : null))\n  );\n};\n\nexport default isAuthorized(Review);","map":{"version":3,"sources":["C:/Users/elísabet/Documents/web-dev/react/react_final_exam/client/src/components/Review.js"],"names":["React","useState","BsFillStarFill","BsPencilSquare","BsFillTrashFill","Link","isAuthorized","axios","makeStyles","Button","FormControl","Input","InputLabel","TextField","useStyles","theme","submit","marginTop","spacing","justifySelf","color","delete","backgroundColor","Review","props","classes","newReviewRating","setNewReviewRating","rating","newReviewTitle","setNewReviewTitle","title","newReviewText","setNewReviewText","review","editModel","setEditModel","deleteModel","setDeleteModel","showDeleteModel","console","log","deleteAccount","showEditModel","e","target","value","handleEditReview","response","post","reviewID","id","data","err","checkUser","userID","user_id","showRating","ratingArray","i","parseInt","push","book_id","book_title","user","first_name","last_name","img"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { BsFillStarFill, BsPencilSquare, BsFillTrashFill } from 'react-icons/bs'\r\nimport { Link } from \"react-router-dom\";\r\nimport isAuthorized from \"../auth/isAuthorized\";\r\n\r\nimport axios from 'axios';\r\n\r\nimport { makeStyles } from '@material-ui/styles'\r\nimport {\r\n    Button,\r\n    FormControl,\r\n    Input,\r\n    InputLabel,\r\n    TextField\r\n  } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    submit: {\r\n     marginTop: theme.spacing * 3,\r\n     justifySelf: 'center',\r\n     color:'white'\r\n   },\r\n   delete: {\r\n       backgroundColor: 'rgb(61, 60, 60)',\r\n       color:'white'\r\n   }\r\n }));\r\n\r\nconst Review = (props) => {\r\n\r\n    const classes = useStyles()\r\n\r\n    const [ newReviewRating, setNewReviewRating] = useState(props.rating)\r\n    const [ newReviewTitle, setNewReviewTitle] = useState(props.title)\r\n    const [ newReviewText, setNewReviewText] = useState(props.review)    \r\n    const [ editModel, setEditModel ] = useState(false)\r\n    const [ deleteModel, setDeleteModel ] = useState(false)\r\n\r\n    const showDeleteModel = () => {\r\n        console.log('delete')\r\n        return(\r\n            <div className=\"model\">\r\n                <div className=\"model-content\">\r\n                <h2>Are you sure you want to delete this review?</h2>\r\n                <p>This action cannot be reversed</p>\r\n                 <Button type=\"submit\"\r\n                    fullWidth\r\n                    variant=\"contained\"\r\n                    className={classes.delete}  \r\n                    onClick={deleteAccount}>Delete</Button> \r\n                <Button type=\"submit\"\r\n                    fullWidth\r\n                    color=\"secondary\"\r\n                    variant=\"contained\"\r\n                    className={classes.submit}  \r\n                    onClick={()=>setDeleteModel(false)}>Cancel</Button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    const showEditModel = () => {\r\n        // const review = reviewedBooks.find(review => review.id === id)\r\n        console.log(props)\r\n        return(<div className=\"model\">\r\n            <div className=\"model-content\">\r\n            <span className=\"btn\" onClick={() => setEditModel(false)}>X</span>\r\n            <h3>Edit Your Review</h3>\r\n            <FormControl margin=\"normal\"  fullWidth>\r\n                <InputLabel htmlFor=\"title\">Title of Review</InputLabel>\r\n                <Input name=\"title\" type=\"text\"\r\n                defaultValue={props.title} \r\n                 id=\"title\" \r\n                 onChange={(e) => setNewReviewTitle(e.target.value)}/>\r\n          </FormControl>\r\n            <FormControl margin=\"normal\"  fullWidth>\r\n                <InputLabel htmlFor=\"rating\">Rating</InputLabel>\r\n                <Input name=\"rating\" type=\"number\" \r\n                defaultValue={props.rating}\r\n                id=\"rating\" \r\n                onChange={(e) => setNewReviewRating(e.target.value)}/>\r\n          </FormControl>\r\n            <FormControl margin=\"normal\"  fullWidth>\r\n                <TextField \r\n                    id=\"standard-textarea\"\r\n                    defaultValue={props.review}\r\n                    label=\"Review\"\r\n                    multiline\r\n  onChange={(e) => setNewReviewText(e.target.value)}/>\r\n          </FormControl>\r\n          \r\n            <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            className={classes.submit}\r\n             onClick={(e) => handleEditReview(e)}>Submit Changes</Button>\r\n             \r\n             <div className=\"dltBtn btn\" onClick={() => setDeleteModel(true)}><BsFillTrashFill />Delete Account</div>\r\n            </div>\r\n        </div>)\r\n    }\r\n    \r\n\r\n    const handleEditReview = async () => {\r\n        if(newReviewRating || newReviewText || newReviewTitle){\r\n            try{\r\n                const response = await axios.post('http://localhost/updateReview',{\r\n                    reviewID:props.id,\r\n                     newReviewTitle, \r\n                     newReviewText,\r\n                     newReviewRating\r\n                })\r\n                console.log(response.data)\r\n                setEditModel(false)\r\n            }catch(err){\r\n                if(err){\r\n                    console.log(err)\r\n\r\n        }\r\n        }\r\n    }\r\n}\r\n\r\n    const checkUser = () => {\r\n        if(props.userID === props.user_id){\r\n            return   <div className=\"btn\" onClick={(e) => setEditModel(props.id)}><BsPencilSquare/>Edit Review</div>\r\n        }\r\n    }\r\n\r\n    console.log(props)\r\n    const showRating = () => {\r\n        let ratingArray = []\r\n        for(let i= 0; i< parseInt(props.rating); i++){\r\n            ratingArray.push(<BsFillStarFill key={i}/>)\r\n        }\r\n        return ratingArray\r\n    }\r\n      return(\r\n        // {props.review?\r\n        <>\r\n        {editModel? showEditModel(editModel) :null}\r\n         <div className=\"review\" key={props.id}>\r\n             <div className=\"link-editBtn\">\r\n             <Link to={\"bookdetail/\"+props.book_id}>About {props.book_title}</Link>\r\n             {checkUser()}\r\n             </div>\r\n            <div className=\"pub-authors\"> \r\n                <div>\r\n                <h5>{props.book_title}</h5>\r\n                <p>Review by {props.user.first_name} {props.user.last_name}</p>\r\n                </div>\r\n                 <div className=\"rating\"> {showRating()}</div>\r\n            </div>\r\n            <img src={props.img} alt=\"book cover\"/>\r\n            <h3>{props.title}</h3>\r\n            <p>{props.review}</p>\r\n            {deleteModel? showDeleteModel(): null}\r\n        </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default isAuthorized(Review)"]},"metadata":{},"sourceType":"module"}