{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\el\\xEDsabet\\\\Documents\\\\web-dev\\\\react\\\\react_final_exam\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\el\\xEDsabet\\\\Documents\\\\web-dev\\\\react\\\\react_final_exam\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\el\\xEDsabet\\\\Documents\\\\web-dev\\\\react\\\\react_final_exam\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from'axios';import SearchResult from'../components/SearchResult';import isAuthorized from'../auth/isAuthorized';import'../css/form.css';import'../css/searchResults.css';import apiCred from'../config/api';import{makeStyles}from'@material-ui/styles';import{Button,FormControl,Input,InputLabel}from'@material-ui/core';var useStyles=makeStyles(function(theme){return{submit:{marginTop:theme.spacing*3,justifySelf:'center',color:'white'}};});var Search=function Search(props){var classes=useStyles();var _useState=useState(),_useState2=_slicedToArray(_useState,2),searchString=_useState2[0],setSearchString=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),searchResults=_useState4[0],setSearchResults=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),likedBooks=_useState6[0],setLikedBooks=_useState6[1];var validateForm=function validateForm(){if(!searchString){return true;}else{return false;}};var handleSearch=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response,bookArray;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios(\"https://www.googleapis.com/books/v1/volumes?q=\".concat(searchString,\"&keys:\").concat(apiCred.key),{withCredentials:false});case 4:response=_context.sent;console.log(response.data);bookArray=response.data.items;bookArray.map(function(bookInfo){var book=bookInfo.volumeInfo;console.log(book);return book;});setSearchResults(bookArray);_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);if(_context.t0){props.onError(_context.t0.response.data.error);}case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function handleSearch(_x){return _ref.apply(this,arguments);};}();var handleError=function handleError(data){props.onError(data);};var handleNotification=function handleNotification(data){props.onNotification(data);};useEffect(function(){var fetchLikedBooks=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios('https://read-it-react.herokuapp.com/getBooksInLibrary');case 3:response=_context2.sent;// console.log(response.data)\nsetLikedBooks(response.data);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);if(_context2.t0){props.onError(_context2.t0.response.data.error);}case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function fetchLikedBooks(){return _ref2.apply(this,arguments);};}();if(props.isAuthorized){fetchLikedBooks();}},[props.isAuthorized]);// TODO add review book button\n// TODO if user has liked book make heart filled \nreturn/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Search for Books\"),/*#__PURE__*/React.createElement(\"form\",{className:\"searchForm\"},/*#__PURE__*/React.createElement(FormControl,{margin:\"normal\",fullWidth:true},/*#__PURE__*/React.createElement(InputLabel,{htmlFor:\"search\"},\"Search by Book Title\"),/*#__PURE__*/React.createElement(Input,{name:\"search\",type:\"text\",id:\"search\",autoComplete:\"search\",onChange:function onChange(e){return setSearchString(e.target.value);}})),/*#__PURE__*/React.createElement(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"secondary\",className:classes.submit,onClick:function onClick(e){return handleSearch(e);}},\"Search\")),/*#__PURE__*/React.createElement(\"div\",{className:\"searchResultContainer\"},searchResults?searchResults.map(function(result){return/*#__PURE__*/React.createElement(SearchResult,Object.assign({},result,{key:result.volumeInfo.title+result.volumeInfo.id,disabled:validateForm,error:handleError,notification:handleNotification,likedBooks:likedBooks}));}):null));};export default isAuthorized(Search);","map":{"version":3,"sources":["C:/Users/elÃ­sabet/Documents/web-dev/react/react_final_exam/client/src/pages/Search.js"],"names":["React","useState","useEffect","axios","SearchResult","isAuthorized","apiCred","makeStyles","Button","FormControl","Input","InputLabel","useStyles","theme","submit","marginTop","spacing","justifySelf","color","Search","props","classes","searchString","setSearchString","searchResults","setSearchResults","likedBooks","setLikedBooks","validateForm","handleSearch","e","preventDefault","key","withCredentials","response","console","log","data","bookArray","items","map","bookInfo","book","volumeInfo","onError","error","handleError","handleNotification","onNotification","fetchLikedBooks","target","value","result","title","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\r\nimport axios from 'axios'\r\nimport SearchResult from '../components/SearchResult'\r\nimport isAuthorized from '../auth/isAuthorized'\r\nimport  '../css/form.css'\r\nimport '../css/searchResults.css'\r\n\r\nimport apiCred from '../config/api'\r\n\r\nimport { makeStyles } from '@material-ui/styles'\r\nimport {\r\n    Button,\r\n    FormControl,\r\n    Input,\r\n    InputLabel\r\n  } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n     submit: {\r\n      marginTop: theme.spacing * 3,\r\n      justifySelf: 'center',\r\n      color:'white'\r\n    },\r\n  }));\r\n\r\nconst Search = (props) => {\r\n\r\n    const classes = useStyles()\r\n\r\n    const [ searchString, setSearchString ] = useState()\r\n    const [ searchResults, setSearchResults ] = useState()\r\n    const [ likedBooks, setLikedBooks ] = useState('')\r\n\r\n    const validateForm = () => {\r\n        if(!searchString){\r\n            return true\r\n        }else{\r\n            return false\r\n        }\r\n    }\r\n\r\n    const handleSearch = async (e) => {\r\n        e.preventDefault()\r\n        try{\r\n            const response = await axios(`https://www.googleapis.com/books/v1/volumes?q=${searchString}&keys:${apiCred.key}`,  {\r\n            withCredentials: false })\r\n        console.log(response.data)\r\n        const bookArray = response.data.items\r\n        bookArray.map(bookInfo => {\r\n            let book = bookInfo.volumeInfo\r\n            console.log(book)\r\n            return book\r\n        })\r\n        setSearchResults(bookArray)\r\n        }catch(err){\r\n            if(err){\r\n                props.onError(err.response.data.error)\r\n             }\r\n        }\r\n        \r\n    }\r\n\r\n    const handleError = (data) => {\r\n        props.onError(data)\r\n    }\r\n    const handleNotification = (data) => {\r\n        props.onNotification(data)\r\n    }\r\n\r\n    useEffect(() => {\r\n        const fetchLikedBooks = async () => {\r\n            try{\r\n                const response = await axios('https://read-it-react.herokuapp.com/getBooksInLibrary')\r\n            // console.log(response.data)\r\n                setLikedBooks(response.data)\r\n            \r\n            }catch(err){\r\n                if(err){\r\n                    props.onError(err.response.data.error)\r\n                 }\r\n            }\r\n            \r\n        }\r\n        \r\n       if(props.isAuthorized){\r\n        fetchLikedBooks()\r\n       } \r\n    },[props.isAuthorized])\r\n// TODO add review book button\r\n// TODO if user has liked book make heart filled \r\n\r\n    return(\r\n        <>\r\n        <h1>Search for Books</h1>\r\n        <form className=\"searchForm\">\r\n            <FormControl margin=\"normal\"  fullWidth>\r\n            <InputLabel htmlFor=\"search\">Search by Book Title</InputLabel>\r\n            <Input name=\"search\" type=\"text\" id=\"search\" autoComplete=\"search\" onChange={(e) => setSearchString(e.target.value)}/>\r\n          </FormControl>\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            className={classes.submit} onClick={(e)=> handleSearch(e)} >Search</Button>\r\n        </form>\r\n        <div className=\"searchResultContainer\">\r\n        {searchResults?\r\n            searchResults.map(result=> {\r\n                return <SearchResult {...result} key={result.volumeInfo.title+result.volumeInfo.id} disabled={validateForm} error={handleError} notification={handleNotification} likedBooks={likedBooks}/>\r\n            })\r\n        : null}\r\n        </div>\r\n           \r\n            \r\n        \r\n        </>\r\n    )\r\n}\r\n\r\nexport default isAuthorized(Search)\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}